<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will+Boot-PRO (Aviator)</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { background:#030303; font-family:sans-serif; color:white; overflow-x: hidden; display: flex; flex-direction: column; align-items: center; text-align: center; min-height: 100vh; }
  .glass { background:rgba(255,255,255,0.03); backdrop-filter:blur(20px); border-radius:24px; border: 1px solid rgba(255,255,255,0.08); display: flex; flex-direction: column; align-items: center; width: 100%; }
  .neon-red { box-shadow:0 0 30px rgba(220,38,38,0.4); }
  .btn-red { background: linear-gradient(135deg, #dc2626, #991b1b); padding:14px 28px; border-radius:14px; font-weight:800; cursor:pointer; transition:0.3s; border:none; color:white; text-transform: uppercase; width: 100%; }
  .btn-red:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(220,38,38,0.3); }
  .btn-gray { background:#151515; padding:14px 28px; border-radius:14px; font-weight:bold; cursor:pointer; transition:0.3s; border: 1px solid #333; color:#aaa; }
  .clock-display { font-family: monospace; font-weight: 800; letter-spacing: 4px; text-shadow: 0 0 15px rgba(220,38,38,0.5); }
  .signal-card { padding:30px; border-radius:24px; text-align:center; border: 2px solid #dc2626; background: rgba(0,0,0,0.8); width: 100%; max-width: 420px; animation: slideUp 0.6s ease-out; }
  .select-dark { background: #000; border: 1px solid #333; color: #dc2626; padding: 14px; border-radius: 12px; width: 100%; outline: none; appearance: none; text-align-last: center; font-weight: bold; text-transform: uppercase; font-size: 12px; }
  @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  .history-badge { width: 50px; height: 28px; border-radius: 6px; font-size: 11px; font-weight: 900; display: flex; align-items: center; justify-content: center; }
  .badge-blue { background: #2563eb; } .badge-purple { background: #9333ea; } .badge-pink { background: #db2777; }
  .alcance-box { background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; margin-top: 15px; border-left: 4px solid #dc2626; text-align: left; width: 100%; font-size: 11px; }
  .feedback-btn { padding: 12px; border-radius: 10px; font-size: 12px; font-weight: 900; cursor: pointer; color: white; border: none; flex: 1; transition: 0.3s; }
  .btn-win { background: #10b981; } .btn-win:hover { background: #059669; box-shadow: 0 0 15px rgba(16,185,129,0.4); }
  .btn-loss { background: #ef4444; } .btn-loss:hover { background: #dc2626; box-shadow: 0 0 15px rgba(239,68,68,0.4); }
</style>
</head>
<body>

<audio id="alertSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"></audio>

<div id="page1" class="min-h-screen flex flex-col items-center justify-center p-6 w-full">
    <p class="text-red-500 font-black text-sm uppercase tracking-[0.4em] mb-2">N√£o √© sorte, √© estrat√©gia</p>
    <h1 class="text-5xl font-black mb-4 tracking-tighter uppercase text-white">Will+Boot-PRO</h1>
    <div class="glass p-10 max-w-md neon-red space-y-4">
      <input id="userMain" placeholder="Usu√°rio" class="w-full p-4 rounded-xl bg-black border border-gray-800 text-white outline-none">
      <input id="passMain" type="password" placeholder="Senha" class="w-full p-4 rounded-xl bg-black border border-gray-800 text-white outline-none">
      <select id="casaAposta" class="select-dark border-red-600/40">
          <option value="default">SELECCIONE A CASA DE APOSTA</option>
          <option value="ElephantBet">ElephantBet</option>
          <option value="BantuBet">BantuBet</option>
          <option value="888Bet">888Bet</option>
          <option value="PremierBet">PremierBet</option>
          <option value="GoldenBet">GoldenBet</option>
          <option value="AfriBet">AfriBet</option>
      </select>
      <button class="btn-red mt-2" onclick="loginMain()">ENTRAR NO TERMINAL</button>
    </div>
</div>

<div id="page2" class="hidden py-8 px-6 max-w-2xl w-full flex flex-col items-center space-y-6">
  <div id="historyBar" class="hidden flex flex-wrap justify-center gap-2 w-full"></div>
  <div id="clock2" class="clock-display text-red-600 text-4xl">‚åö 00:00:00</div>

  <div class="flex gap-4 w-full">
      <button class="btn-red flex-1" onclick="analyzeHistory()">üìä ANALISAR VELAS</button>
      <button class="btn-gray px-8" onclick="logoutMain()">SAIR</button>
  </div>

  <div id="signalsPage2" class="w-full flex justify-center min-h-[120px]"></div>

  <div class="glass p-6 w-full">
      <p class="text-[10px] text-gray-500 uppercase font-black mb-2">Upload de Hist√≥rico Aviator</p>
      <input type="file" id="uploadHistory" accept="image/*" class="text-sm text-gray-500">
      <p id="historyResult" class="mt-2 text-[10px] font-black text-red-500 uppercase"></p>
      
      <div class="flex gap-3 mt-4 w-full">
          <button class="feedback-btn btn-win" onclick="trainIA('WIN')">ACERTOU ‚úÖ</button>
          <button class="feedback-btn btn-loss" onclick="trainIA('LOSS')">ERROU ‚ùå</button>
      </div>
  </div>

  <div class="glass p-6 border-l-4 border-red-600 w-full">
      <h3 class="text-red-600 font-black text-[10px] uppercase mb-2">üß† RESPOSTA DA IA (APRENDIZAGEM)</h3>
      <p id="tipTextP2" class="text-xs text-gray-400 italic">O algoritmo est√° em fase de reconhecimento...</p>
  </div>

  <div class="glass p-4 w-full h-[250px]">
      <canvas id="chartPage2"></canvas>
  </div>

  <div class="glass p-8 border-red-600/30 w-full">
    <button id="btnOpenVip" class="btn-red bg-pink-600" onclick="showVipForm()">üíé ACESSO VIP ROSA</button>
    <div id="vipForm" class="hidden mt-6 space-y-4 w-full">
        <input id="vipUser" placeholder="Usu√°rio VIP" class="w-full p-4 rounded-xl bg-black border border-gray-800 text-white outline-none">
        <input id="vipPass" type="password" placeholder="Senha VIP" class="w-full p-4 rounded-xl bg-black border border-gray-800 text-white outline-none">
        <div class="flex gap-2">
            <button class="btn-red flex-1" onclick="loginVIP()">ENTRAR</button>
            <button class="btn-gray" onclick="showVipForm()">FECHAR</button>
        </div>
    </div>
  </div>
</div>

<div id="page3" class="hidden py-8 px-6 max-w-xl w-full flex flex-col items-center space-y-6">
  <div id="clock3" class="clock-display text-pink-500 text-4xl">‚åö 00:00:00</div>
  <div class="flex justify-between items-center w-full px-2">
    <h1 class="text-2xl font-black text-pink-600 italic uppercase">VIP SNIPER ROSA</h1>
    <button class="btn-gray text-[10px]" onclick="backToP2()">VOLTAR</button>
  </div>

  <div id="signalsVIP" class="w-full flex justify-center"></div>

  <div class="glass p-4 w-full h-[250px]">
      <canvas id="chartVIP"></canvas>
  </div>

  <div class="glass p-6 border-pink-600/30 w-full text-center">
      <h3 class="text-pink-500 font-black text-[10px] uppercase mb-2 italic">üó®Ô∏è IA REAL-TIME FEEDBACK</h3>
      <p id="tipTextP3" class="text-xs text-gray-400 leading-relaxed font-medium">Sincronize para treinar a rede neural VIP...</p>
  </div>

  <div class="glass p-8 border-pink-600/20 w-full">
    <input type="file" id="uploadHistoryVIP" accept="image/*" class="mb-4 text-xs">
    
    <div class="flex gap-3 mb-6 w-full">
        <button class="feedback-btn btn-win" onclick="trainIA('WIN_VIP')">ACERTOU ‚úÖ</button>
        <button class="feedback-btn btn-loss" onclick="trainIA('LOSS_VIP')">ERROU ‚ùå</button>
    </div>

    <button class="btn-red bg-pink-700 w-full py-4 font-black" onclick="analyzeHistoryVIP()">GERAR ALVO ROSA</button>
  </div>
</div>

<script>
const BACKEND_URL = "https://willboot-backend-1.onrender.com";
let firstImageLoaded = false;
let firstImageVIPLoaded = false;
let chart2, chartVip;
let sessionTraining = { wins: 0, losses: 0 };

function playSound() { document.getElementById("alertSound").play().catch(e => {}); }

setInterval(()=>{
  const now = new Date();
  const timeStr = now.toLocaleString("pt-PT",{timeZone:"Africa/Luanda", hour:'2-digit', minute:'2-digit', second:'2-digit'});
  if(document.getElementById("clock2")) document.getElementById("clock2").innerHTML="‚åö " + timeStr;
  if(document.getElementById("clock3")) document.getElementById("clock3").innerHTML="‚åö " + timeStr;
},1000);

function trainIA(type) {
    if(type.includes('WIN')) { sessionTraining.wins++; alert("Treino IA: Sucesso Armazenado ‚úÖ"); }
    else { sessionTraining.losses++; alert("Treino IA: Erro Processado para Ajuste ‚ùå"); }
    console.log("Estado de Aprendizado:", sessionTraining);
}

function loginMain(){
  const casa = document.getElementById("casaAposta").value;
  if(document.getElementById("userMain").value === "admin" && document.getElementById("passMain").value === "1234"){
    if(casa === "default") { alert("Selecione uma casa!"); return; }
    document.getElementById("page1").classList.add("hidden");
    document.getElementById("page2").classList.remove("hidden");
    initChart('chartPage2', '#dc2626');
  } else { alert("Acesso Negado."); }
}

function loginVIP(){
  if(document.getElementById("vipUser").value === "William" && document.getElementById("vipPass").value === "230220"){
    document.getElementById("page2").classList.add("hidden");
    document.getElementById("page3").classList.remove("hidden");
    initChart('chartVIP', '#db2777');
  } else { alert("Chave VIP Inv√°lida."); }
}

function backToP2(){ document.getElementById("page3").classList.add("hidden"); document.getElementById("page2").classList.remove("hidden"); }
function showVipForm(){ document.getElementById("vipForm").classList.toggle("hidden"); document.getElementById("btnOpenVip").classList.toggle("hidden"); }
function logoutMain(){ location.reload(); }

function initChart(id, color) {
  const ctx = document.getElementById(id).getContext("2d");
  const chart = new Chart(ctx, { 
    type: 'line', 
    data: { labels:[1,2,3,4,5,6,7,8,9,10], datasets:[{ data:[1.1, 2.5, 1.4, 3.2, 1.8, 4.0, 1.1, 2.2, 1.5, 2.0], borderColor:color, fill:true, backgroundColor: color+'11', tension:0.4, pointRadius: 0 }] }, 
    options: { maintainAspectRatio: false, plugins:{legend:{display:false}}, scales:{y:{display:false}, x:{display:false}} } 
  });
  if(id === 'chartPage2') chart2 = chart; else chartVip = chart;
}

function getPrevisaoVIP() {
    const now = new Date();
    now.setSeconds(now.getSeconds() + 45);
    return now.toLocaleTimeString("pt-PT", {hour:'2-digit', minute:'2-digit', second:'2-digit'});
}

async function analyzeHistory(){
  const fileInput = document.getElementById("uploadHistory");
  const casa = document.getElementById("casaAposta").value;
  if (!firstImageLoaded && fileInput.files.length === 0) { alert("Sincronize o hist√≥rico primeiro!"); return; }
  
  document.getElementById("historyResult").innerHTML = `üõ∞Ô∏è IA APRENDENDO ALGORITMO ${casa}...`;
  try {
    const res = await fetch(`${BACKEND_URL}/analyze`, { method: "POST" });
    const data = await res.json();
    let mult = data.analysis.mult >= 10 ? (1.5 + Math.random()*3) : data.analysis.mult;
    
    let colorClass = mult >= 2.0 ? "text-roxo" : "text-azul";
    let typeText = mult >= 2.0 ? "ROXO" : "AZUL";

    playSound();
    document.getElementById("signalsPage2").innerHTML = `
      <div class="signal-card">
        <h3 class="text-gray-400 text-[10px] uppercase font-bold tracking-widest">IA SINAL ${typeText} (${casa})</h3>
        <div class="text-6xl font-black ${colorClass}">√ó${mult.toFixed(2)}</div>
        <div class="alcance-box">
            <div class="flex justify-between"><span>Alcance M√≠n: <b>${(mult*0.85).toFixed(2)}x</b></span><span>M√°x: <b>${(mult*1.15).toFixed(2)}x</b></span></div>
        </div>
      </div>`;
    
    chart2.data.datasets[0].data.push(mult);
    chart2.data.datasets[0].data.shift();
    chart2.update();
    
    // Revelar Hist√≥rico ap√≥s processamento
    document.getElementById("historyBar").classList.remove("hidden");
    document.getElementById("historyBar").innerHTML = `<div class="history-badge ${mult >= 2.0 ? 'badge-purple' : 'badge-blue'}">${mult.toFixed(2)}x</div>` + document.getElementById("historyBar").innerHTML;
    
    document.getElementById("tipTextP2").innerText = `IA: Treinamento ativo na ${casa}. Mem√≥ria cache atualizada com novo padr√£o.`;
    firstImageLoaded = true;
    document.getElementById("historyResult").innerHTML = "‚úÖ SINCRONIZA√á√ÉO E TREINO ATIVO";
  } catch(e) { alert("Erro Servidor"); }
}

async function analyzeHistoryVIP(){
  const fileVIP = document.getElementById("uploadHistoryVIP");
  if (!firstImageVIPLoaded && fileVIP.files.length === 0) { alert("Imagem VIP Necess√°ria!"); return; }
  try {
    const res = await fetch(`${BACKEND_URL}/analyze`, { method: "POST" });
    const data = await res.json();
    let mult = 10.0 + Math.random()*25;
    const pTime = getPrevisaoVIP();

    playSound();
    document.getElementById("signalsVIP").innerHTML = `
      <div class="signal-card border-rosa bg-pink-950/20" style="border-color:#db2777">
        <h2 class="text-rosa font-black text-xl italic uppercase">SNIPER ROSA IA</h2>
        <div class="text-7xl font-black text-rosa">√ó${mult.toFixed(2)}</div>
        <div class="alcance-box" style="border-color:#db2777">
            <p class="text-pink-300"><b>Janela:</b> ${pTime}</p>
            <p class="text-gray-400 mt-1">Estimado: ${(mult*0.9).toFixed(2)}x - ${(mult*1.2).toFixed(2)}x</p>
        </div>
      </div>`;
      
    chartVip.data.datasets[0].data.push(mult);
    chartVip.data.datasets[0].data.shift();
    chartVip.update();
    document.getElementById("tipTextP3").innerText = "William, a rede neural detectou probabilidade m√°xima de rosa. Confirme o acerto ap√≥s a entrada para refor√ßar a IA.";
    firstImageVIPLoaded = true;
  } catch(e){ alert("Erro VIP."); }
}
</script>
</body>
</html>
