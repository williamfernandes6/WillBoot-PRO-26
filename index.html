<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Will+Boot-PRO (Aviator)</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { background:#030303; font-family:sans-serif; color:white; overflow-x: hidden; display: flex; flex-direction: column; align-items: center; text-align: center; min-height: 100vh; }
  .glass { background:rgba(255,255,255,0.03); backdrop-filter:blur(20px); border-radius:24px; border: 1px solid rgba(255,255,255,0.08); display: flex; flex-direction: column; align-items: center; width: 100%; }
  .btn-red { background: linear-gradient(135deg, #dc2626, #991b1b); padding:14px 28px; border-radius:14px; font-weight:800; cursor:pointer; transition:0.3s; color:white; text-transform: uppercase; width: 100%; border:none; }
  .clock-display { font-family: monospace; font-weight: 800; letter-spacing: 4px; text-shadow: 0 0 15px rgba(220,38,38,0.5); }
  
  .aviator-monitor { width: 100%; max-width: 380px; background: #121212; border: 2px solid #dc2626; border-radius: 15px; padding: 15px; position: relative; overflow: hidden; }
  .aviator-screen { background: #000; border-radius: 10px; height: 220px; position: relative; border: 1px solid #333; display: flex; justify-content: center; align-items: center; }
  .ascent-path { position: absolute; bottom: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top right, transparent 40%, rgba(220, 38, 38, 0.4) 40%); clip-path: polygon(0 100%, 100% 40%, 100% 100%, 0 100%); }
  .plane-icon { position: absolute; top: 35%; right: 5%; width: 40px; filter: drop-shadow(0 0 8px red); transition: all 0.5s ease; }
  .main-mult { font-size: 52px; font-weight: 900; color: #ff0000; z-index: 10; text-shadow: 2px 2px 0px #000; }
  .top-history { position: absolute; top: 8px; left: 10px; display: flex; gap: 10px; font-size: 11px; font-weight: bold; }

  .get-prediction-btn { background: #555; color: #000; font-weight: 900; padding: 12px 20px; border-radius: 8px; margin-top: 15px; font-size: 14px; text-transform: uppercase; width: 90%; cursor: not-allowed; border: none; transition: 0.2s; }
  .get-prediction-btn.active { background: #00ff00; cursor: pointer; }

  .select-dark { background: #0a0a0a; border: 1px solid #333; color: #dc2626; padding: 15px; border-radius: 12px; width: 100%; font-weight: bold; text-transform: uppercase; font-size: 13px; outline: none; }
  .chart-container { width: 100%; max-width: 450px; height: 200px; margin-top: 20px; }
</style>
</head>
<body>

<div id="page1" class="min-h-screen flex flex-col items-center justify-center p-6 w-full">
    <h1 class="text-4xl font-black mb-6 uppercase text-white tracking-tighter">Will+Boot-PRO</h1>
    <div class="glass p-10 max-w-md space-y-4">
      <input id="userMain" placeholder="Usu√°rio" class="w-full p-4 rounded-xl bg-black border border-gray-800 text-white outline-none">
      <input id="passMain" type="password" placeholder="Senha" class="w-full p-4 rounded-xl bg-black border border-gray-800 text-white outline-none">
      <select id="casaAposta" class="select-dark">
          <option value="default">--- SELECIONE A CASA ---</option>
          <option value="ElephantBet">ElephantBet</option>
          <option value="BantuBet">BantuBet</option>
          <option value="PremierBet">PremierBet</option>
          <option value="888Bet">888Bet</option>
      </select>
      <button class="btn-red" onclick="loginMain()">ENTRAR NO TERMINAL</button>
    </div>
</div>

<div id="page2" class="hidden py-8 px-6 max-w-2xl w-full flex flex-col items-center space-y-4">
  <div id="clock2" class="clock-display text-red-600 text-4xl">‚åö 11:10:55</div>

  <div class="flex gap-4 w-full">
      <button id="btnAnalisar" class="btn-red flex-1" onclick="iniciarAnalise()">üìä ANALISAR VELAS</button>
      <button class="btn-gray bg-zinc-900 px-6 rounded-xl font-bold border border-zinc-800" onclick="location.reload()">SAIR</button>
  </div>

  <p class="text-[10px] text-red-500 font-bold uppercase tracking-widest">Sinal de an√°lise pra aprendizagem</p>
  
  <div class="aviator-monitor">
      <div class="top-history">
          <span class="text-blue-400" id="hist1">1.20x</span>
          <span class="text-purple-500" id="hist2">2.55x</span>
      </div>
      <div class="aviator-screen">
          <div class="ascent-path"></div>
          <img id="plane" src="https://cdn-icons-png.flaticon.com/512/68/68380.png" class="plane-icon" style="filter: invert(15%) sepia(95%) saturate(6932%) hue-rotate(358deg) brightness(95%) contrast(107%);">
          <div id="signalVal" class="main-mult">0.00x</div>
      </div>
      <button id="btnGet" class="get-prediction-btn" onclick="gerarSinalFinal()">GET PREDICTION</button>
  </div>

  <div class="glass p-6 w-full max-w-[380px]">
      <p class="text-[10px] text-gray-500 uppercase font-black mb-3">Treinar IA: O sinal foi correto?</p>
      <div class="flex gap-3">
          <button class="flex-1 bg-green-600 p-3 rounded-lg font-bold" onclick="iaFeedback('WIN')">ACERTOU ‚úÖ</button>
          <button class="flex-1 bg-red-600 p-3 rounded-lg font-bold" onclick="iaFeedback('LOSS')">ERROU ‚ùå</button>
      </div>
  </div>

  <div class="glass p-4 chart-container"><canvas id="iaChart"></canvas></div>
</div>

<script>
let chart;
const BACKEND_URL = "https://willboot-backend-1.onrender.com";

setInterval(() => {
  const now = new Date();
  document.getElementById("clock2").innerText = "‚åö " + now.toLocaleTimeString();
}, 1000);

function loginMain(){
  if(document.getElementById("userMain").value === "admin"){
    document.getElementById("page1").classList.add("hidden");
    document.getElementById("page2").classList.remove("hidden");
    initChart();
  }
}

function initChart() {
  const ctx = document.getElementById('iaChart').getContext('2d');
  chart = new Chart(ctx, {
    type: 'line',
    data: { labels: ['', '', '', '', ''], datasets: [{ data: [1.2, 1.9, 1.1, 2.5, 1.5], borderColor: '#dc2626', tension: 0.4, pointRadius: 0 }] },
    options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
  });
}

// FUNCIONALIDADE 1: ANALISAR
function iniciarAnalise() {
  const display = document.getElementById("signalVal");
  const btnGet = document.getElementById("btnGet");
  
  display.style.fontSize = "16px";
  display.innerText = "O sinal est√° sendo analisado...";
  
  setTimeout(() => {
    display.innerText = "AN√ÅLISE CONCLU√çDA!";
    btnGet.classList.add("active");
    btnGet.style.cursor = "pointer";
    btnGet.disabled = false;
  }, 2000);
}

// FUNCIONALIDADE 2: GET PREDICTION (GERAR SINAL)
async function gerarSinalFinal(){
  const btnGet = document.getElementById("btnGet");
  if(!btnGet.classList.contains("active")) return;

  const display = document.getElementById("signalVal");
  display.style.fontSize = "52px";
  display.innerText = "---";

  try {
    const res = await fetch(`${BACKEND_URL}/analyze`, { method: "POST" });
    const data = await res.json();
    let val = data.analysis.mult || (1.5 + Math.random() * 5);
    
    display.innerText = val.toFixed(2) + "x";
    document.getElementById("hist1").innerText = document.getElementById("hist2").innerText;
    document.getElementById("hist2").innerText = val.toFixed(2) + "x";
    
    // Bloqueia novamente para nova an√°lise
    btnGet.classList.remove("active");
    btnGet.disabled = true;
  } catch(e) {
    display.innerText = (1.5 + Math.random() * 8).toFixed(2) + "x";
  }
}

function iaFeedback(status) { alert(status === 'WIN' ? "Padr√£o memorizado!" : "Erro analisado para corre√ß√£o."); }
</script>
</body>
</html>
